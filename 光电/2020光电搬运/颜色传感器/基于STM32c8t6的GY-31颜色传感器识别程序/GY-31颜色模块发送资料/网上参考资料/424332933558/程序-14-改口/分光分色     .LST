C51 COMPILER V7.06   ___稚______                                                         06/22/2005 10:11:48 PAGE 1   


C51 COMPILER V7.06, COMPILATION OF MODULE ___稚______
OBJECT MODULE PLACED IN 分光分色     .OBJ
COMPILER INVOKED BY: D:\Keilk\C51\BIN\C51.EXE 分光分色     .c BROWSE DEBUG OBJECTEXTEND

stmt level    source

   1          
   2          #include<reg52.h>
   3          #include<absacc.h>
   4          #include<intrins.h>
   5           unsigned char power=0;
   6           unsigned int rgb[4];
   7           unsigned char zx,th0=0xf9;
   8           float rx=1,gx=1,bx=1;//红蓝系数 
   9           unsigned int x,y,z; 
  10           sbit REST=P2^2;//掉电复位
  11           sbit POWR=P1^7;//换向
  12           sbit POWL=P2^0;//换向
  13           sbit TEST=P2^1;//短路检测？
  14           sbit BPH =P3^2;//白平衡的 LED灯 
  15           sbit BCS =P3^3;//启动测试 
  16           sbit OE=P1^7;
  17          
  18          
  19           bit zhb1;
  20           bit zhb2;
  21          ///////////////////////////
  22          delay()
  23          {
  24   1      unsigned long x;
  25   1       for(x=0;x<10000;x++)
  26   1         {}
  27   1      
  28   1      
  29   1      }
  30          
  31          //////////////////////// 
  32          w_transform();
  33          
  34          rest()
  35          {power=0;
  36   1       
  37   1      }
  38          
  39          
  40          
  41          code void (code *dos[])()=
  42            {w_transform,rest          };
*** WARNING C182 IN LINE 42 OF 分光分色     .C: pointer to different objects
*** WARNING C182 IN LINE 42 OF 分光分色     .C: pointer to different objects
  43          
  44          
  45          xdos()
  46            {(*dos[power])();}
  47          
  48          
  49          
  50          zhkz()
  51          {
  52   1      if(TEST==0)//测试使能
  53   1        zhb1=1;
C51 COMPILER V7.06   ___稚______                                                         06/22/2005 10:11:48 PAGE 2   

  54   1      
  55   1      
  56   1      }
  57            
  58          main()
  59          
  60          { static unsigned int del=30,delx;
  61   1         OE=0;//TCS230片选有效        
  62   1         Time();//定时器配置 
*** WARNING C206 IN LINE 62 OF 分光分色     .C: 'Time': missing function-prototype
  63   1          
  64   1       //  zhb2=1;
  65   1         delay(); 
  66   1         while(1)
  67   1              {
  68   2                
  69   2                if(delx==0)
  70   2                  {        
  71   3                    if(BPH==0)  
  72   3                       {zhb2=1;delx=5000;}   
  73   3                    if(BCS==0)
  74   3                      {zhb1=1;delx=5000;}
  75   3                    if(zx==0)
  76   3                       {ysxf(); }  //结束采样 转换排序显示
*** WARNING C206 IN LINE 76 OF 分光分色     .C: 'ysxf': missing function-prototype
  77   3                  
  78   3                   }
  79   2                 else delx--;          
  80   2      
  81   2               if(zhb1==1)
  82   2                  {OE=0;
  83   3              
  84   3                      { xdos();del=0;}//采样
  85   3                          
  86   3                   if(zx==0)
  87   3                        {zhb1=0;OE=1; }  //结束采样 转换排序显示
  88   3                  }
  89   2      
  90   2      
  91   2               
  92   2                if(zhb2==1)
  93   2                  {
  94   3                    OE=0;
  95   3                                    
  96   3      
  97   3                    xdos();//采样
  98   3                   if(zx==0)//采样结束
  99   3                        {zhb2=0; 
 100   4                         gx=rgb[1];//设绿色系数为1
 101   4                       if(rgb[0]!=0)
 102   4                         rx=gx/rgb[0];//红色平衡系数
 103   4                       else rx=1;
 104   4                       if(rgb[2]!=0)   
 105   4                         bx=gx/rgb[2];//兰色平衡系数
 106   4                       else bx=1; 
 107   4                         zhb2=0;  // zhb1=1;
 108   4                        OE=1; 
 109   4                        }  //白平衡算平衡系数
 110   3                  }
 111   2                
 112   2              
 113   2           //    zhkz();//键值判断并选择所执行的程序
C51 COMPILER V7.06   ___稚______                                                         06/22/2005 10:11:48 PAGE 3   

 114   2                                               
 115   2              }
 116   1      
 117   1      }
 118          
 119          
 120          /*偏红偏蓝蓝*/
 121          
 122          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    307    ----
   CONSTANT SIZE    =      4    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     33       4
   IDATA SIZE       =   ----    ----
   BIT SIZE         =      2    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  4 WARNING(S),  0 ERROR(S)
